from trafficSimulator import *

#https://towardsdatascience.com/simulating-traffic-flow-in-python-ee1eab4dd20f

# Create simulation
sim = Simulation()

# Add multiple roads
sim.create_roads([
    #Horizontales
    ((40, 120), (350, 115)),
    ((40, 123), (350, 118)),

    #Verticales Izq
    ((60, 80), (50, 160)),
    ((63, 80), (53, 160)),
    ((66, 80), (56, 160)),
    ((69, 80), (59, 160)),
    ((62, 160),(72, 80)),
    ((65, 160),(75, 80)),
    ((68, 160),(78, 80)),
    ((71, 160),(81, 80)),

    #Verticales derecha
    ((320, 80),(325, 118)),
    ((323, 80),(328, 118)),
    ((331, 118),(326, 80)),
    ((334, 118),(329, 80)),

    #Avenida 1
    ((120, 118),(105, 160)),
    ((108, 160),(123, 118)),
    #Avenida2
    ((153, 160),(138, 118)),
    ((156, 160),(141, 118)),
    #Avenida3
    ((170, 118),(190, 160)),
    ((173, 118),(193, 160)),
    #Avenida4
    ((240, 160),(270, 118)),
    #Avenida5
    ((290, 118),(285, 160)),

])

"""
    ((300, 98), (0, 98)),
    ((0, 102), (300, 102)),
    ((180, 60), (0, 60)),
    ((220, 55), (180, 60)),
    ((300, 30), (220, 55)),
    ((180, 60), (160, 98)),
    ((158, 130), (300, 130)),
    ((0, 178), (300, 178)),
    ((300, 182), (0, 182)),
    ((160, 102), (155, 180))"""

sim.create_gen({
    'vehicle_rate': 60,
    'vehicles': [
        [1, {"path": [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]}]
    ]
})

# Start simulation
win = Window(sim)
win.offset = (-150, -110)
win.run(steps_per_update=2)